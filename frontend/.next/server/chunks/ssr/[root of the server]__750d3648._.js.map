{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/nindang/Documents/SocialNetwork/frontend/src/app/comment/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"axios\";\nimport { MessageCircle, Heart, Repeat, Image, ArrowLeftIcon } from \"lucide-react\";\nimport { ReactNode } from \"react\";\n\nexport default function CommentPage({ params }: { params: { id: string } }) {\n  const router = useRouter();\n  const [newComment, setNewComment] = useState(\"\");\n  const [showReply, setShowReply] = useState(false);\n  const [replyTo, setReplyTo] = useState(\"\");\n  const [liked, setLiked] = useState(false);\n  const [likeCount, setLikeCount] = useState(0);\n  const [reposted, setReposted] = useState(false);\n  const [repostCount, setRepostCount] = useState(0);\n  const [comments, setComments] = useState(0);\n  const [showComment, setShowComment] = useState(false);\n  const [replyLikes, setReplyLikes] = useState<{ [key: string]: boolean }>({});\n  const [replyLikeCounts, setReplyLikeCounts] = useState<{ [key: string]: number }>({});\n  const [replyReplies, setReplyReplies] = useState<{ [key: string]: any[] }>({});\n  const [replyInputs, setReplyInputs] = useState<{ [key: string]: string }>({});\n  const [showInputReply, setShowInputReply] = useState<{ [key: string]: boolean }>({});\n  const [post, setPost] = useState<any>(null);\n  const [user, setUser] = useState<any>(null);\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  const [commentList, setCommentList] = useState<any[]>([]);\n  const [commentLikes, setCommentLikes] = useState<{ [key: string]: boolean }>({});\n  const [commentLikeCounts, setCommentLikeCounts] = useState<{ [key: string]: number }>({});\n\n  const handleComment = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const formData = new FormData();\n      formData.append(\"content\", newComment);\n\n      const response = await fetch(`http://127.0.0.1:8000/posts/${params.id}/comment`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n        body: formData,\n      });\n      if (!response.ok) throw new Error('Failed to comment');\n      const data = await response.json();\n      setCommentList(prev => [...prev, data]);\n    } catch (error) {\n      console.error('Error commenting:', error);\n    }\n  };\n\n  const handleReply = (username: string) => {\n    // TODO: Implement reply functionality\n  };\n\n  const toggleReplyInput = (commentId: string) => {\n    setShowInputReply(prev => ({\n      ...prev,\n      [commentId]: !prev[commentId]\n    }));\n  };\n\n  const handleLike = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://127.0.0.1:8000/posts/${params.id}/like`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) throw new Error('Failed to like post');\n      const data = await response.json();\n\n      if (data && data.liked_by && currentUser) {\n        const userHasLiked = data.liked_by\n          .map((id: string) => String(id).trim())\n          .includes(String(currentUser.user_id).trim());\n        setLiked(userHasLiked);\n        setLikeCount(data.likes ?? 0);\n      }\n    } catch (error) {\n      console.error('Error liking post:', error);\n    }\n  };\n\n  const handleRepost = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://127.0.0.1:8000/posts/${params.id}/repost`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) throw new Error('Failed to repost');\n      const data = await response.json();\n\n      if (data && data.reposted_by && currentUser) {\n        const userHasReposted = data.reposted_by\n          .map((id: string) => String(id).trim())\n          .includes(String(currentUser.user_id).trim());\n        setReposted(userHasReposted);\n        setRepostCount(data.reposts ?? 0);\n      }\n    } catch (error) {\n      console.error('Error reposting:', error);\n    }\n  };\n\n  const handleReplyLike = (replyId: string) => {\n    setReplyLikes((prev) => ({\n      ...prev,\n      [replyId]: !prev[replyId],\n    }));\n    setReplyLikeCounts((prev) => ({\n      ...prev,\n      [replyId]: prev[replyId] ? prev[replyId] - 1 : (prev[replyId] || 0) + 1,\n    }));\n  };\n\n  const handleReplyInputChange = (replyId: string, value: string) => {\n    setReplyInputs((prev) => ({\n      ...prev,\n      [replyId]: value,\n    }));\n  };\n\n  const handleReplySubmit = (postId: number, commentId: string) => {\n    if (!replyInputs[commentId]?.trim()) return;\n    \n    const newReply = {\n      id: Date.now(),\n      username: \"User\",\n      avatar: \"https://placehold.co/40x40\",\n      time: \"Vừa xong\",\n      content: replyInputs[commentId],\n    };\n  \n    // TODO: Implement reply submission\n  \n    setReplyInputs((prev) => ({\n      ...prev,\n      [commentId]: \"\",\n    }));\n  };\n\n  const handleLikeComment = async (commentId: string) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await fetch(`http://127.0.0.1:8000/comments/${commentId}/like`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n      });\n      if (!response.ok) throw new Error('Failed to like comment');\n      const data = await response.json();\n\n      // data.liked_by là mảng user_id đã like comment này\n      const userHasLiked = data.liked_by\n        .map((id: string) => String(id).trim())\n        .includes(String(currentUser.user_id).trim());\n\n      setCommentLikes(prev => ({ ...prev, [commentId]: userHasLiked }));\n      setCommentLikeCounts(prev => ({ ...prev, [commentId]: data.likes ?? 0 }));\n    } catch (error) {\n      console.error('Error liking comment:', error);\n    }\n  };\n\n  function formatTime(createdAt: string) {\n    const now = new Date();\n    const postDate = new Date(createdAt);\n    const diffInMinutes = Math.floor((now.getTime() - postDate.getTime()) / (1000 * 60));\n    if (diffInMinutes < 60) {\n      return `${diffInMinutes} phút`;\n    } else if (diffInMinutes < 1440) {\n      const diffInHours = Math.floor(diffInMinutes / 60);\n      return `${diffInHours} giờ`;\n    } else {\n      const diffInDays = Math.floor(diffInMinutes / 1440);\n      return `${diffInDays} ngày`;\n    }\n  }\n\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get(`http://127.0.0.1:8000/posts/${params.id}`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        });\n        setPost(response.data);\n\n        // Kiểm tra liked_by và reposted_by nếu đã có currentUser\n        if (response.data.liked_by && currentUser) {\n          const userHasLiked = response.data.liked_by\n            .map((id: string) => String(id).trim())\n            .includes(String(currentUser.user_id).trim());\n          setLiked(userHasLiked);\n          setLikeCount(response.data.likes ?? 0);\n        } else {\n          setLiked(false);\n          setLikeCount(response.data.likes ?? 0);\n        }\n\n        if (response.data.reposted_by && currentUser) {\n          const userHasReposted = response.data.reposted_by\n            .map((id: string) => String(id).trim())\n            .includes(String(currentUser.user_id).trim());\n          setReposted(userHasReposted);\n          setRepostCount(response.data.reposts ?? 0);\n        } else {\n          setReposted(false);\n          setRepostCount(response.data.reposts ?? 0);\n        }\n      } catch (err) {\n        console.error(\"Error fetching post:\", err);\n      }\n    };\n    fetchPost();\n  }, [params.id, currentUser]);\n\n  useEffect(() => {\n    if (!post?.user_id) return;\n    const fetchUser = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get(`http://127.0.0.1:8000/users/${post.user_id}`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        });\n        setUser(response.data.user);\n      } catch (err) {\n        console.error(\"Error fetching user:\", err);\n      }\n    };\n    fetchUser();\n  }, [post]);\n\n  useEffect(() => {\n    const fetchCurrentUser = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get(\"http://127.0.0.1:8000/users/me\", {\n          headers: { 'Authorization': `Bearer ${token}` }\n        });\n        setCurrentUser(response.data.user);\n      } catch (err) {\n        console.error(\"Error fetching current user:\", err);\n      }\n    };\n    fetchCurrentUser();\n  }, []);\n\n  useEffect(() => {\n    if (!post?._id && !post?.post_id && !params.id) return;\n    const fetchComments = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const res = await axios.get(\n          `http://127.0.0.1:8000/posts/${post.post_id || post._id || params.id}/comments`,\n          { headers: { 'Authorization': `Bearer ${token}` } }\n        );\n        setCommentList(res.data);\n\n        // Cập nhật trạng thái like cho từng comment\n        if (currentUser) {\n          const likesObj: { [key: string]: boolean } = {};\n          const likeCountsObj: { [key: string]: number } = {};\n          res.data.forEach((cmt: any) => {\n            likesObj[cmt.comment_id] = cmt.liked_by?.includes(currentUser.user_id);\n            likeCountsObj[cmt.comment_id] = cmt.likes ?? 0;\n          });\n          setCommentLikes(likesObj);\n          setCommentLikeCounts(likeCountsObj);\n        }\n      } catch (err) {\n        console.error(\"Error fetching comments:\", err);\n      }\n    };\n    fetchComments();\n  }, [post, params.id, currentUser]);\n\n  return (\n    <div className=\"w-full h-screen bg-gray-100 flex flex-col items-center p-4\">\n      <div className=\"min-w-xl flex items-center justify-between gap-4 mb-4\">\n        <ArrowLeftIcon size={24} className=\"cursor-pointer\" onClick={() => window.history.back()} />\n        <h1 className=\"text-xl font-bold mb-4\">Bình luận</h1>\n        <div></div>\n      </div>\n      <div className=\"max-w-xl w-full h-auto\">\n        <div className=\"bg-white rounded-2xl shadow-md p-4 space-y-4\">\n          {/* Post content */}\n          <div className=\"border-b pb-4\">\n            <div className=\"flex items-center space-x-3\">\n              <img src={user?.avatar || \"https://placehold.co/40x40\"} alt=\"Avatar\" className=\"w-10 h-10 rounded-full\" />\n              <div>\n                <p className=\"font-semibold\">{user?.username || \"username\"}</p>\n                <p className=\"text-sm text-gray-500\">{post?.created_at ? formatTime(post.created_at) : \"time\"}</p>\n              </div>\n            </div>\n            <p className=\"mt-2\">{post?.content || \"content\"}</p>\n            {post?.image && <img src={post.image} alt=\"Post\" className=\"mt-2 rounded-lg\" />}\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-4 text-gray-500 mt-3\">\n              <ActionButton \n                icon={<Heart size={18} className={liked ? \"text-red-500\" : \"text-gray-500\"} />} \n                count={likeCount} \n                onClick={handleLike}\n              />\n              <ActionButton \n                icon={<MessageCircle size={18} />} \n                count={post?.comments ?? 0} \n                onClick={() => {}} // hoặc mở khung comment nếu muốn\n              />\n              <ActionButton \n                icon={<Repeat size={18} className={reposted ? \"text-green-500\" : \"text-gray-500\"} />} \n                count={repostCount} \n                onClick={handleRepost}\n              />\n            </div>\n          </div>\n\n          {/* Comments list */}\n          <div className=\"space-y-4\">\n            {commentList.length === 0 && (\n              <div className=\"text-gray-400 text-sm\">Chưa có bình luận nào.</div>\n            )}\n            {commentList.map((cmt: any) => (\n              <div key={cmt.comment_id || cmt._id} className=\"flex flex-col items-start space-x-3 border-b pb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <img src={cmt.avatar || \"https://placehold.co/40x40\"} alt=\"Avatar\" className=\"w-8 h-8 rounded-full\" />\n                  <span className=\"font-semibold text-sm\">{cmt.username || \"user\"}</span>\n                  <span className=\"text-xs text-gray-400\">{cmt.created_at ? formatTime(cmt.created_at) : \"\"}</span>\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"text-sm mt-1\">{cmt.content}</div>\n                  {cmt.image && <img src={cmt.image} alt=\"Comment\" className=\"mt-2 rounded-lg\" />}\n                  {cmt.video && <video src={cmt.video} controls className=\"mt-2 rounded-lg w-full\" />}\n                </div>\n                <div className=\"flex gap-4 text-gray-500 mt-3\">\n                  <ActionButton \n                    icon={<Heart size={18} className={commentLikes[cmt.comment_id] ? \"text-red-500\" : \"text-gray-500\"} />} \n                    count={commentLikeCounts[cmt.comment_id] ?? 0} \n                    onClick={() => handleLikeComment(cmt.comment_id)}\n                  />\n                  <ActionButton \n                    icon={<MessageCircle size={18} />} \n                    count={cmt.replies ?? 0} \n                    onClick={() => toggleReplyInput(cmt.comment_id)}\n                  />\n                </div>\n                {showInputReply[cmt.comment_id] && (\n                  <div className=\"flex items-start space-x-2 mt-2 w-full\">\n                    <img src={currentUser?.avatar || \"https://placehold.co/32x32\"} alt=\"Avatar\" className=\"w-8 h-8 rounded-full\" />\n                    <input\n                      type=\"text\"\n                      className=\"flex-1 p-2 border rounded-lg text-sm\"\n                      placeholder=\"Trả lời bình luận...\"\n                      value={replyInputs[cmt.comment_id] || \"\"}\n                      onChange={e => setReplyInputs(prev => ({ ...prev, [cmt.comment_id]: e.target.value }))}\n                    />\n                    <button\n                      className=\"bg-blue-500 text-white px-3 py-1 rounded-lg text-sm\"\n                      onClick={() => handleReplySubmit(post?.post_id, cmt.comment_id)}\n                    >\n                      Gửi\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n\n          {/* Comment input */}\n          <div className=\"flex items-start space-x-3\">\n            <img src=\"https://placehold.co/40x40\" alt=\"Avatar\" className=\"w-10 h-10 rounded-full\" />\n            <div className=\"flex-1\">\n              <input\n                type=\"text\"\n                placeholder=\"Viết bình luận...\"\n                className=\"w-full p-2 border rounded-lg focus:outline-none\"\n                value={newComment}\n                onChange={(e) => setNewComment(e.target.value)}\n              />\n            </div>\n            <button\n              className=\"bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold\"\n              onClick={async () => {\n                await handleComment();\n                setNewComment(''); // Reset input after comment is posted\n              }}\n            >\n              Đăng\n            </button>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ActionButton({ icon, count, onClick }: { icon: ReactNode; count: number; onClick: () => void }) {\n  return (\n    <button onClick={onClick} className=\"flex items-center space-x-1 text-gray-500 hover:text-black\">\n      {icon}\n      <span className=\"text-sm\">{count}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}